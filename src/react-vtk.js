"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),require("@kitware/vtk.js/Rendering/OpenGL/Profiles/Volume"),require("@kitware/vtk.js/Rendering/OpenGL/Profiles/Geometry"),require("@kitware/vtk.js/Rendering/OpenGL/Profiles/Glyph"),require("@kitware/vtk.js/IO/Core/DataAccessHelper/HttpDataAccessHelper"),require("@kitware/vtk.js/IO/Core/DataAccessHelper/JSZipDataAccessHelper"),require("@kitware/vtk.js/Filters/Sources/ConcentricCylinderSource.js"),require("@kitware/vtk.js/Filters/Sources/ConeSource.js"),require("@kitware/vtk.js/Filters/Sources/CubeSource.js"),require("@kitware/vtk.js/Filters/Sources/CylinderSource.js"),require("@kitware/vtk.js/Filters/Sources/LineSource.js"),require("@kitware/vtk.js/Filters/Sources/PlaneSource.js"),require("@kitware/vtk.js/Filters/Sources/PointSource.js"),require("@kitware/vtk.js/Filters/Sources/SphereSource.js"),require("@kitware/vtk.js/Filters/Core/Cutter.js"),require("@kitware/vtk.js/Filters/General/WarpScalar.js"),require("@kitware/vtk.js/Filters/General/TubeFilter.js"),require("@kitware/vtk.js/IO/Geometry/PLYReader.js"),require("@kitware/vtk.js/IO/Geometry/STLReader.js"),require("@kitware/vtk.js/IO/Misc/ElevationReader.js"),require("@kitware/vtk.js/IO/Misc/OBJReader.js"),require("@kitware/vtk.js/IO/Misc/PDBReader.js"),require("@kitware/vtk.js/IO/XML/XMLImageDataReader.js"),require("@kitware/vtk.js/IO/XML/XMLPolyDataReader.js");var e=require("@babel/runtime/helpers/toConsumableArray"),t=require("@babel/runtime/helpers/classCallCheck"),r=require("@babel/runtime/helpers/createClass"),a=require("@babel/runtime/helpers/inherits"),n=require("@babel/runtime/helpers/possibleConstructorReturn"),i=require("@babel/runtime/helpers/getPrototypeOf"),o=require("react"),s=require("prop-types"),l=require("@babel/runtime/helpers/slicedToArray"),u=require("@babel/runtime/helpers/defineProperty"),d=require("@babel/runtime/helpers/assertThisInitialized"),c=require("@kitware/vtk.js/macros.js"),p=require("@kitware/vtk.js/Common/DataModel/BoundingBox.js"),f=require("@kitware/vtk.js/Rendering/Core/CubeAxesActor.js"),h=require("@kitware/vtk.js/Rendering/Core/AxesActor"),v=require("@kitware/vtk.js/Interaction/Widgets/OrientationMarkerWidget"),y=require("@kitware/vtk.js/Interaction/Style/InteractorStyleManipulator.js"),m=require("@kitware/vtk.js/Interaction/Manipulators/MouseCameraTrackballMultiRotateManipulator.js"),b=require("@kitware/vtk.js/Interaction/Manipulators/MouseCameraTrackballPanManipulator.js"),g=require("@kitware/vtk.js/Interaction/Manipulators/MouseCameraTrackballRollManipulator.js"),w=require("@kitware/vtk.js/Interaction/Manipulators/MouseCameraTrackballRotateManipulator.js"),k=require("@kitware/vtk.js/Interaction/Manipulators/MouseCameraTrackballZoomManipulator.js"),R=require("@kitware/vtk.js/Interaction/Manipulators/MouseCameraTrackballZoomToMouseManipulator.js"),C=require("@kitware/vtk.js/Interaction/Manipulators/GestureCameraManipulator.js"),O=require("@kitware/vtk.js/Interaction/Manipulators/MouseBoxSelectorManipulator.js"),P=require("@kitware/vtk.js/Rendering/OpenGL/HardwareSelector.js"),A=require("@kitware/vtk.js/Common/DataModel/DataSet/Constants.js"),D=require("@babel/runtime/helpers/typeof"),j=require("@kitware/vtk.js/Common/Core/Base64.js"),M=require("@kitware/vtk.js/Rendering/Core/Volume.js"),T=require("@kitware/vtk.js/Rendering/Core/VolumeMapper.js"),S=require("@kitware/vtk.js/Rendering/Core/ColorTransferFunction/ColorMaps.js"),x=require("@kitware/vtk.js/Rendering/Core/ColorTransferFunction.js"),I=require("@kitware/vtk.js/Common/DataModel/PiecewiseFunction.js"),E=require("@kitware/vtk.js/Rendering/Core/ImageSlice.js"),V=require("@kitware/vtk.js/Rendering/Core/ImageMapper.js"),W=require("@kitware/vtk.js/Interaction/UI/VolumeController.js"),B=require("@kitware/vtk.js/Common/DataModel/PolyData.js"),U=require("@kitware/vtk.js/vtk.js"),q=require("@babel/runtime/helpers/extends"),F=require("@kitware/vtk.js/Rendering/OpenGL/RenderWindow.js"),z=require("@kitware/vtk.js/Rendering/Core/RenderWindow.js"),L=require("@kitware/vtk.js/Rendering/Core/RenderWindowInteractor.js"),N=require("@kitware/vtk.js/Rendering/Core/Renderer.js"),G=require("@kitware/vtk.js/Rendering/Core/RenderWindow"),_=require("@kitware/vtk.js/Rendering/Core/RenderWindowInteractor"),H=require("@kitware/vtk.js/Rendering/OpenGL/RenderWindow"),J=require("@kitware/vtk.js/Rendering/Core/Actor.js"),Z=require("@kitware/vtk.js/Rendering/Core/Mapper.js"),X=require("@kitware/vtk.js/Rendering/Core/ScalarBarActor.js"),Y=require("@kitware/vtk.js/Rendering/Core/Actor2D.js"),K=require("@kitware/vtk.js/Rendering/Core/Mapper2D.js"),Q=require("@kitware/vtk.js/Rendering/Core/Coordinate.js"),$=require("@kitware/vtk.js/Rendering/Core/Coordinate/Constants.js"),ee=require("@kitware/vtk.js/Rendering/Core/Glyph3DMapper.js"),te=require("@kitware/vtk.js/Common/DataModel/ImageData.js"),re=require("@kitware/vtk.js/Common/Core/DataArray.js"),ae=require("@kitware/vtk.js/Filters/General/Calculator.js"),ne=require("@kitware/vtk.js/Common/DataModel/DataSet.js");function ie(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var oe=ie(e),se=ie(t),le=ie(r),ue=ie(a),de=ie(n),ce=ie(i),pe=ie(o),fe=ie(s),he=ie(l),ve=ie(u),ye=ie(d),me=ie(c),be=ie(p),ge=ie(f),we=ie(h),ke=ie(v),Re=ie(y),Ce=ie(m),Oe=ie(b),Pe=ie(g),Ae=ie(w),De=ie(k),je=ie(R),Me=ie(C),Te=ie(O),Se=ie(P),xe=ie(D),Ie=ie(j),Ee=ie(M),Ve=ie(T),We=ie(S),Be=ie(x),Ue=ie(I),qe=ie(E),Fe=ie(V),ze=ie(W),Le=ie(B),Ne=ie(U),Ge=ie(q),_e=ie(F),He=ie(z),Je=ie(L),Ze=ie(N),Xe=ie(G),Ye=ie(_),Ke=ie(H),Qe=ie(J),$e=ie(Z),et=ie(X),tt=ie(Y),rt=ie(K),at=ie(Q),nt=ie(ee),it=ie(te),ot=ie(re),st=ie(ae),lt=ie(ne);function ut(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function dt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ut(Object(r),!0).forEach((function(t){ve.default(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ut(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ct(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=ce.default(e);if(t){var n=ce.default(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return de.default(this,r)}}var pt=pe.default.createContext(null),ft=pe.default.createContext(null),ht=pe.default.createContext(null),vt=pe.default.createContext(null),yt=pe.default.createContext(null),mt={None:null,Pan:Oe.default,Zoom:De.default,Roll:Pe.default,Rotate:Ae.default,MultiRotate:Ce.default,ZoomToMouse:je.default,Select:Te.default};var bt={position:"absolute",width:"100%",height:"100%",overflow:"hidden"},gt=function(e){ue.default(r,e);var t=ct(r);function r(e){var a;se.default(this,r),(a=t.call(this,e)).containerRef=pe.default.createRef(),a.renderWindow=e.renderWindow,a.renderer=e.renderer,a.camera=a.renderer.getActiveCamera(),a.openglRenderWindow=e.renderWindowView,a.interactor=e.interactor,a.defaultStyle=Re.default.newInstance(),a.style=e.interactive?a.defaultStyle:null,a.axesActor=we.default.newInstance(),a.orientationWidget=ke.default.newInstance({actor:a.axesActor,interactor:a.interactor,parentRenderer:a.renderer}),a.orientationWidget.setViewportCorner(ke.default.Corners.BOTTOM_LEFT),a.orientationWidget.setViewportSize(.15),a.orientationWidget.setMinPixelSize(100),a.orientationWidget.setMaxPixelSize(300),a.selector=Se.default.newInstance({captureZValues:!0}),a.selector.setFieldAssociation(A.FieldAssociations.FIELD_ASSOCIATION_POINTS),a.selector.attach(a.openglRenderWindow,a.renderer),a.renderView=function(){a.updateCubeBounds(),a.renderWindow.render()},a.resetCamera=a.resetCamera.bind(ye.default(a));var n=be.default.newInstance({bounds:[0,0,0,0,0,0]});a.updateCubeBounds=function(){if(a.props.showCubeAxes){n.reset();for(var e=a.renderer.get("props").props,t=0;t<e.length;t++){var r=e[t];r.getVisibility()&&r.getUseBounds()&&r!==a.cubeAxes&&n.addBounds.apply(n,oe.default(r.getBounds()))}a.cubeAxes&&a.cubeAxes.setDataBounds(n.getBounds())}},a.debouncedCubeBounds=c.debounce(a.updateCubeBounds,50),a.setInteractorStyle=function(e){a.props.interactive&&(a.style=e,a.interactor.setInteractorStyle(e))},a.hasFocus=!1,a.handleKey=function(e){if(a.hasFocus&&"KeyR"===e.code)a.resetCamera()},a.onEnter=function(){a.hasFocus=!0},a.onLeave=function(){a.hasFocus=!1};var i=function(e,t,r,n){var i=r.x,o=r.y;if(-1!==a.props.pickingModes.indexOf(t)){var s=a.getPointerSizeTolerance(),l=a.pickClosest(Math.floor(i),Math.floor(o),s);e&&e(l[0],n),"setProps"in a.props&&a.props.setProps(ve.default({},"".concat(t,"Info"),l[0]))}};a.hover=c.debounce((function(e,t){var r=e.x,n=e.y;if(-1!==a.props.pickingModes.indexOf("hover")){var i=a.getPointerSizeTolerance(),o=a.pickClosest(Math.floor(r),Math.floor(n),i);0===a.lastSelection.length&&0===o.length||(a.lastSelection=o,a.props.onHover&&a.props.onHover(o[0],t),"setProps"in a.props&&a.props.setProps({hoverInfo:o[0]}))}}),10);return a.onClick=function(e){return i(a.props.onClick,"click",a.getScreenEventPositionFor(e),e)},a.onMouseDown=function(e){return i(a.props.onMouseDown,"mouseDown",a.getScreenEventPositionFor(e),e)},a.onMouseUp=function(e){return i(a.props.onMouseUp,"mouseUp",a.getScreenEventPositionFor(e),e)},a.onMouseMove=function(e){return a.hover(a.getScreenEventPositionFor(e),e)},a.lastSelection=[],a.onBoxSelectChange=function(e){var t=e.selection;if(-1!==a.props.pickingModes.indexOf("select")){var r=he.default(t,4),n=r[0],i=r[1],o=r[2],s=r[3],l=a.pick(n,o,i,s,!0);a.props.onSelect&&a.props.onSelect(l,event),"setProps"in a.props&&a.props.setProps({selectInfo:l})}},a.props.showCubeAxes&&a.initCubeAxes(),a.subscriptions=[],a.subscriptions.push(a.renderer.onEvent((function(e){var t=e.type;e.renderer&&"ComputeVisiblePropBoundsEvent"===t&&a.debouncedCubeBounds()}))),a}return le.default(r,[{key:"initCubeAxes",value:function(){this.cubeAxes=ge.default.newInstance({visibility:!1,dataBounds:[-1,1,-1,1,-1,1]}),Array.from(this.cubeAxes.getActors()).forEach((function(e){return(0,e.setVisibility)(!1)})),this.cubeAxes.setCamera(this.camera),this.renderer.addActor(this.cubeAxes)}},{key:"getPointerSizeTolerance",value:function(){return this.props.pointerSize/2}},{key:"getScreenEventPositionFor",value:function(e){var t=this.openglRenderWindow.getCanvas().getBoundingClientRect(),r=this.openglRenderWindow.getSize(),a=he.default(r,2),n=a[0],i=a[1],o=n/t.width,s=i/t.height;return{x:o*(e.clientX-t.left),y:s*(t.height-e.clientY+t.top),z:0}}},{key:"render",value:function(){var e=this.props,t=e.id,r=e.children,a=e.style,n=e.className;return pe.default.createElement("div",{key:t,id:t,className:n,style:dt({position:"relative"},a),onMouseEnter:this.onEnter,onMouseLeave:this.onLeave,onClick:this.onClick,onMouseUp:this.onMouseUp,onMouseMove:this.onMouseMove},pe.default.createElement("div",{style:bt,ref:this.containerRef}),pe.default.createElement(pt.Provider,{value:this},r))}},{key:"componentDidMount",value:function(){var e=this.containerRef.current;document.addEventListener("keyup",this.handleKey),e.addEventListener("mousedown",this.onMouseDown),this.update(this.props),this.resetCamera()}},{key:"componentDidUpdate",value:function(e,t,r){this.update(this.props,e)}},{key:"componentWillUnmount",value:function(){for(this.debouncedCubeBounds&&this.debouncedCubeBounds.cancel(),this.hover&&this.hover.cancel(),clearTimeout(this.resetCameraTimeout),clearTimeout(this.renderViewTimeout);this.subscriptions.length;)this.subscriptions.pop().unsubscribe();this.containerRef.current.removeEventListener("mousedown",this.onMouseDown),document.removeEventListener("keyup",this.handleKey),this.selector.delete(),this.orientationWidget.delete(),this.defaultStyle.delete(),this.defaultStyle=null,this.style=null,this.renderer=null,this.selector=null,this.orientationWidget=null}},{key:"update",value:function(e,t){var r,a,n,i=e.background,o=e.interactorSettings,s=e.interactive,l=e.cameraPosition,u=e.cameraViewUp,d=e.cameraFocalPoint,c=e.cameraParallelProjection,p=e.autoResetCamera,f=e.triggerRender,h=e.triggerResetCamera,v=e.showCubeAxes,y=e.cubeAxesStyle,m=e.showOrientationAxes;(!i||t&&i===t.background||this.renderer.setBackground(i),!s||!o||t&&o===t.interactorSettings||(r=this.style,a=o,n=this,r.removeAllMouseManipulators(),a.forEach((function(e){var t=mt[e.action];if(t){var a=e.button,i=e.shift,o=e.control,s=e.alt,l=e.scrollEnabled,u=e.dragEnabled,d=e.useWorldUpVec,c=e.worldUpVec,p=e.useFocalPointAsCenterOfRotation,f=t.newInstance();f.setButton(a),f.setShift(!!i),f.setControl(!!o),f.setAlt(!!s),void 0!==l&&f.setScrollEnabled(l),void 0!==u&&f.setDragEnabled(u),r.addMouseManipulator(f),f.onBoxSelectChange&&n.onBoxSelectChange&&f.onBoxSelectChange(n.onBoxSelectChange),void 0!==d&&f.setUseWorldUpVec(d),void 0!==c&&f.setWorldUpVec(c),void 0!==p&&f.setUseFocalPointAsCenterOfRotation(p)}})),r.addGestureManipulator(Me.default.newInstance())),!c||t&&c===t.cameraParallelProjection)||(this.renderer.getActiveCamera().setParallelProjection(c),t&&p&&this.resetCamera());(!l||t&&JSON.stringify(l)===JSON.stringify(t.cameraPosition))&&(!u||t&&JSON.stringify(u)===JSON.stringify(t.cameraViewUp))&&(!d||t&&JSON.stringify(d)===JSON.stringify(t.cameraFocalPoint))||(this.renderer.getActiveCamera().set({position:l,viewUp:u,focalPoint:d}),t&&p&&this.resetCamera());this.props.showCubeAxes&&(null==this.cubeAxes&&this.initCubeAxes(),this.cubeAxes.setVisibility(v)&&(Array.from(this.cubeAxes.getActors()).forEach((function(e){return(0,e.setVisibility)(v)})),this.renderView()),this.cubeAxes.set(y||{})&&this.renderView()),m!==this.orientationWidget.getEnabled()&&this.orientationWidget.setEnabled(m),t&&f!==t.triggerRender&&(this.renderViewTimeout=setTimeout(this.renderView,0)),t&&h!==t.triggerResetCamera&&(this.resetCameraTimeout=setTimeout(this.resetCamera,0))}},{key:"resetCamera",value:function(){this.renderer.resetCamera(),this.props.interactive&&this.style.setCenterOfRotation(this.renderer.getActiveCamera().getFocalPoint()),this.renderWindow.render()}},{key:"pickClosest",value:function(e,t,r){var a=Math.floor(e-r),n=Math.floor(t-r),i=Math.ceil(e+r),o=Math.ceil(t+r);if(this.selector.setArea(a,n,i,o),this.previousSelectedData=null,this.selector.captureBuffers()){var s=[e,t],l=this.selector.getPixelInformation(s,r,[0,0]);if(null==l||null==l.prop)return[];var u=this.openglRenderWindow.displayToWorld(Math.round((a+i)/2),Math.round((n+o)/2),0,this.renderer),d=this.openglRenderWindow.displayToWorld(Math.round((a+i)/2),Math.round((n+o)/2),1,this.renderer),c=[Array.from(u),Array.from(d)],p=Array.from(this.openglRenderWindow.displayToWorld(l.displayPosition[0],l.displayPosition[1],l.zValue,this.renderer)),f=[l.displayPosition[0],l.displayPosition[1],l.zValue],h=[];return h[0]=dt(dt({worldPosition:p,displayPosition:f,compositeID:l.compositeID},l.prop.get("representationId")),{},{ray:c}),h}return[]}},{key:"pick",value:function(e,t,r,a){var n=this,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(this.selector.setArea(e,t,r,a),this.previousSelectedData=null,this.selector.captureBuffers()){if(this.selections=this.selector.generateSelection(e,t,r,a)||[],i){var o=[Array.from(this.openglRenderWindow.displayToWorld(e,t,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(r,t,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(r,a,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(e,a,0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(e,t,1,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(r,t,1,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(r,a,1,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(e,a,1,this.renderer))],s=[];return this.selections.forEach((function(e){var t=e.getProperties().prop,r=null==t?void 0:t.get("representationId").representationId;r&&s.push(r)})),{frustrum:o,representationIds:s}}var l=[Array.from(this.openglRenderWindow.displayToWorld(Math.round((e+r)/2),Math.round((t+a)/2),0,this.renderer)),Array.from(this.openglRenderWindow.displayToWorld(Math.round((e+r)/2),Math.round((t+a)/2),1,this.renderer))];return this.selections.map((function(e){var t=e.getProperties(),r=t.prop,a=t.compositeID,i=t.displayPosition;return null!=r&&dt(dt({worldPosition:Array.from(n.openglRenderWindow.displayToWorld(i[0],i[1],i[2],n.renderer)),displayPosition:i,compositeID:a},r.get("representationId")),{},{ray:l})})).filter(Boolean)}return[]}}]),r}(o.Component);gt.defaultProps={style:{width:"100%",height:"100%"},background:[.2,.3,.4],cameraPosition:[0,0,1],cameraViewUp:[0,1,0],cameraFocalPoint:[0,0,0],autoResetCamera:!0,cameraParallelProjection:!1,triggerRender:0,triggerResetCamera:0,interactorSettings:[{button:1,action:"Rotate"},{button:2,action:"Pan"},{button:3,action:"Zoom",scrollEnabled:!0},{button:1,action:"Pan",alt:!0},{button:1,action:"Zoom",control:!0},{button:1,action:"Select",shift:!0},{button:1,action:"Roll",alt:!0,shift:!0}],interactive:!0,pickingModes:[],showCubeAxes:!1,pointerSize:0,showOrientationAxes:!1},gt.propTypes={id:fe.default.string,style:fe.default.object,className:fe.default.string,background:fe.default.array,interactorSettings:fe.default.array,interactive:fe.default.bool,cameraPosition:fe.default.array,cameraFocalPoint:fe.default.array,cameraViewUp:fe.default.array,cameraParallelProjection:fe.default.bool,autoResetCamera:fe.default.bool,triggerRender:fe.default.number,triggerResetCamera:fe.default.number,children:fe.default.oneOfType([fe.default.arrayOf(fe.default.node),fe.default.node]),pickingModes:fe.default.arrayOf(fe.default.oneOf(["click","hover","select","mouseDown","mouseUp"])),onClick:fe.default.func,clickInfo:fe.default.object,onMouseDown:fe.default.func,mouseDownInfo:fe.default.object,onMouseUp:fe.default.func,mouseUpInfo:fe.default.object,onHover:fe.default.func,hoverInfo:fe.default.object,onSelect:fe.default.func,selectInfo:fe.default.object,pointerSize:fe.default.number,showCubeAxes:fe.default.bool,cubeAxesStyle:fe.default.object,showOrientationAxes:fe.default.bool};var wt={int32:Int32Array,int16:Int16Array,int8:Int8Array,uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array,float32:Float32Array,float64:Float64Array};function kt(e,t){if(!e)return null;if(Array.isArray(e))return t.from(e);if(e.dtype){var r=e.bvals,a=e.dtype,n=Ie.default.toArrayBuffer(r);return new wt[a](n)}return e}function Rt(e,t){return!(!e||2!==e.length||!t||2!==t.length)&&(e[0]===t[0]&&e[1]===t[1])}function Ct(e,t){for(var r in e)if(!(r in t)||e[r]!==t[r])return!1;return!0}function Ot(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Pt(e,t){return xe.default(e)===xe.default(t)&&(Ot(e)&&Ot(t)?function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(e,t):"object"===xe.default(e)&&e&&t?Ct(e,t)&&Ct(t,e):e===t)}function At(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=ce.default(e);if(t){var n=ce.default(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return de.default(this,r)}}var Dt=function(e){ue.default(r,e);var t=At(r);function r(e){var a;return se.default(this,r),(a=t.call(this,e)).validData=!1,a.currentVisibility=!0,a.lookupTable=Be.default.newInstance(),a.piecewiseFunction=Ue.default.newInstance(),a.volume=Ee.default.newInstance({visibility:!1}),a.mapper=Ve.default.newInstance(),a.volume.setMapper(a.mapper),a.volume.getProperty().setRGBTransferFunction(0,a.lookupTable),a.volume.getProperty().setScalarOpacity(0,a.piecewiseFunction),a.volume.getProperty().setInterpolationTypeToLinear(),a}return le.default(r,[{key:"render",value:function(){var e=this;return pe.default.createElement(pt.Consumer,null,(function(t){return e.view||(t.renderer.addVolume(e.volume),e.view=t),pe.default.createElement(ft.Provider,{value:e},pe.default.createElement(yt.Provider,{value:e.mapper},pe.default.createElement("div",{key:e.props.id,id:e.props.id},e.props.children)))}))}},{key:"componentDidMount",value:function(){this.update(this.props)}},{key:"componentDidUpdate",value:function(e,t,r){this.update(this.props,e)}},{key:"componentWillUnmount",value:function(){this.view&&this.view.renderer&&(this.view.renderer.removeVolume(this.volume),this.view=null),this.volume.delete(),this.volume=null,this.mapper.delete(),this.mapper=null}},{key:"update",value:function(e,t){var r,a=e.volume,n=e.property,i=e.mapper,o=e.colorMapPreset,s=e.colorDataRange,l=!1;if(!a||t&&a===t.volume||(l=this.volume.set(a)||l),!n||t&&n===t.property||(l=this.volume.getProperty().set(n)||l),!i||t&&i===t.mapper||(l=this.mapper.set(i)||l),o&&(!t||o!==t.colorMapPreset)){var u;l=!0;var d=We.default.getPresetByName(o);this.lookupTable.applyColorMap(d),(u=this.lookupTable).setMappingRange.apply(u,oe.default(s)),this.lookupTable.updateRange()}!s||t&&Pt(s,t.colorDataRange)||(l=!0,"string"==typeof s?t?this.dataChanged():(this.lookupTable.setMappingRange(0,1),this.lookupTable.updateRange(),this.piecewiseFunction.setNodes([{x:0,y:0,midpoint:.5,sharpness:0},{x:1,y:1,midpoint:.5,sharpness:0}])):((r=this.lookupTable).setMappingRange.apply(r,oe.default(s)),this.lookupTable.updateRange(),this.piecewiseFunction.setNodes([{x:s[0],y:0,midpoint:.5,sharpness:0},{x:s[1],y:1,midpoint:.5,sharpness:0}])));a&&void 0!==a.visibility&&(this.currentVisibility=a.visibility,l=this.volume.setVisibility(this.currentVisibility&&this.validData)||l),l&&this.dataChanged()}},{key:"dataAvailable",value:function(){this.validData||(this.validData=!0,this.volume.setVisibility(this.currentVisibility),this.dataChanged())}},{key:"dataChanged",value:function(){if("auto"===this.props.colorDataRange){this.mapper.update();var e,t=this.mapper.getInputData(),r=t&&t.getPointData().getScalars(),a=r&&r.getRange();if(a)(e=this.lookupTable).setMappingRange.apply(e,oe.default(a)),this.lookupTable.updateRange(),this.piecewiseFunction.setNodes([{x:a[0],y:0,midpoint:.5,sharpness:0},{x:a[1],y:1,midpoint:.5,sharpness:0}]);this.view&&this.view.renderView()}}}]),r}(o.Component);function jt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=ce.default(e);if(t){var n=ce.default(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return de.default(this,r)}}Dt.defaultProps={colorMapPreset:"erdc_rainbow_bright",colorDataRange:"auto"},Dt.propTypes={id:fe.default.string,mapper:fe.default.object,volume:fe.default.object,property:fe.default.object,colorMapPreset:fe.default.string,colorDataRange:fe.default.oneOfType([fe.default.arrayOf(fe.default.number),fe.default.string]),children:fe.default.oneOfType([fe.default.arrayOf(fe.default.node),fe.default.node])};var Mt=function(e){ue.default(r,e);var t=jt(r);function r(e){var a,n;se.default(this,r),(n=t.call(this,e)).validData=!1,n.currentVisibility=!0,n.lookupTable=Be.default.newInstance();var i=We.default.getPresetByName(null!==(a=n.props.colorMapPreset)&&void 0!==a?a:"Grayscale");return n.lookupTable.applyColorMap(i),n.piecewiseFunction=Ue.default.newInstance(),n.actor=qe.default.newInstance({visibility:!1}),n.mapper=Fe.default.newInstance(),n.actor.setMapper(n.mapper),n.actor.getProperty().setRGBTransferFunction(0,n.lookupTable),n.actor.getProperty().setInterpolationTypeToLinear(),n}return le.default(r,[{key:"render",value:function(){var e=this;return pe.default.createElement(pt.Consumer,null,(function(t){return e.view||(t.renderer.addActor(e.actor),e.view=t),pe.default.createElement(ft.Provider,{value:e},pe.default.createElement(yt.Provider,{value:e.mapper},pe.default.createElement("div",{key:e.props.id,id:e.props.id},e.props.children)))}))}},{key:"componentDidMount",value:function(){this.update(this.props)}},{key:"componentDidUpdate",value:function(e,t,r){this.update(this.props,e)}},{key:"componentWillUnmount",value:function(){this.view&&this.view.renderer&&this.view.renderer.removeActor(this.actor),this.actor.delete(),this.actor=null,this.mapper.delete(),this.mapper=null}},{key:"update",value:function(e,t){var r,a=e.actor,n=e.property,i=e.mapper,o=e.colorMapPreset,s=e.colorDataRange,l=e.iSlice,u=e.jSlice,d=e.kSlice,c=e.xSlice,p=e.ySlice,f=e.zSlice,h=!1;if(!a||t&&a===t.actor||(h=this.actor.set(a)||h),!n||t&&n===t.property||(h=this.actor.getProperty().set(n)||h),!i||t&&i===t.mapper||(h=this.mapper.set(i)||h),o&&(!t||o!==t.colorMapPreset)){h=!0;var v=We.default.getPresetByName(o);this.lookupTable.applyColorMap(v)}!s||t&&Pt(s,t.colorDataRange)||(h=!0,"string"==typeof s?t?this.dataChanged():(this.lookupTable.setMappingRange(0,1),this.lookupTable.updateRange(),this.piecewiseFunction.setNodes([{x:0,y:0,midpoint:.5,sharpness:0},{x:1,y:1,midpoint:.5,sharpness:0}])):((r=this.lookupTable).setMappingRange.apply(r,oe.default(s)),this.lookupTable.updateRange(),this.piecewiseFunction.setNodes([{x:s[0],y:0,midpoint:.5,sharpness:0},{x:s[1],y:1,midpoint:.5,sharpness:0}])));null==l||t&&l===t.iSlice||(h=this.mapper.setISlice(l)||h),null==u||t&&u===t.jSlice||(h=this.mapper.setJSlice(u)||h),null==d||t&&d===t.kSlice||(h=this.mapper.setKSlice(d)||h),null==c||t&&c===t.xSlice||(h=this.mapper.setXSlice(c)||h),null==p||t&&p===t.ySlice||(h=this.mapper.setYSlice(p)||h),null==f||t&&f===t.zSlice||(h=this.mapper.setZSlice(f)||h),a&&void 0!==a.visibility&&(this.currentVisibility=a.visibility,h=this.actor.setVisibility(this.currentVisibility&&this.validData)||h),h&&this.dataChanged()}},{key:"dataAvailable",value:function(){this.validData||(this.validData=!0,this.actor.setVisibility(this.currentVisibility),this.dataChanged())}},{key:"dataChanged",value:function(){if("auto"===this.props.colorDataRange){var e;this.mapper.update();var t,r=this.mapper.getInputData(),a=r&&(null===(e=r.getPointData())||void 0===e?void 0:e.getScalars()),n=a&&a.getRange();if(n)(t=this.lookupTable).setMappingRange.apply(t,oe.default(n)),this.lookupTable.updateRange(),this.piecewiseFunction.setNodes([{x:n[0],y:0,midpoint:.5,sharpness:0},{x:n[1],y:1,midpoint:.5,sharpness:0}]);this.view&&this.view.renderView()}}}]),r}(o.Component);function Tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=ce.default(e);if(t){var n=ce.default(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return de.default(this,r)}}Mt.defaultProps={colorMapPreset:"Grayscale",colorDataRange:"auto"},Mt.propTypes={id:fe.default.string,mapper:fe.default.object,actor:fe.default.object,property:fe.default.object,colorMapPreset:fe.default.string,colorDataRange:fe.default.oneOfType([fe.default.arrayOf(fe.default.number),fe.default.string]),iSlice:fe.default.number,jSlice:fe.default.number,kSlice:fe.default.number,xSlice:fe.default.number,ySlice:fe.default.number,zSlice:fe.default.number,children:fe.default.oneOfType([fe.default.arrayOf(fe.default.node),fe.default.node])};var St=function(e){ue.default(r,e);var t=Tt(r);function r(e){var a;se.default(this,r),(a=t.call(this,e)).subscriptions=[],a.containerRef=pe.default.createRef();var n=e.size,i=e.rescaleColorMap;return a.controller=ze.default.newInstance({size:n,rescaleColorMap:i}),a}return le.default(r,[{key:"render",value:function(){var e=this;return pe.default.createElement(pt.Consumer,null,(function(t){return pe.default.createElement(ft.Consumer,null,(function(r){return e.view=t,e.representation=r,pe.default.createElement("div",{ref:e.containerRef})}))}))}},{key:"componentDidMount",value:function(){this.init()}},{key:"componentDidUpdate",value:function(e,t,r){var a;(a=this.controller).setSize.apply(a,oe.default(this.props.size)),this.controller.render()}},{key:"componentWillUnmount",value:function(){for(;this.subscriptions.length;)this.subscriptions.pop().unsubscribe();this.controller.setContainer(null),this.controller.delete(),this.controller=null}},{key:"init",value:function(){var e=this,t=this.containerRef.current,r=this.view,a=r.renderWindow,n=r.props,i=this.representation.volume,o=n.background[0]+n.background[1]+n.background[2]<1.5;if(i&&i.getMapper()&&i.getMapper().getInputData()){var s=i.getMapper().getInputData();this.controller.setContainer(t),this.controller.setupContent(a,i,o),this.controller.render(),this.view.resetCamera(),this.view.renderView(),this.subscriptions.push(s.onModified((function(){return e.onDataChange()}),-1))}else setTimeout((function(){return e.init()}),100)}},{key:"onDataChange",value:function(){var e=this.controller.getWidget();if(this.representation&&this.representation.volume){var t=this.representation.volume.getMapper().getInputData(),r=t.getPointData().getScalars()||t.getPointData().getArrays()[0];e.setDataArray(r.getData())}}}]),r}(o.Component);function xt(e){return pe.default.createElement(ht.Consumer,null,(function(t){return pe.default.createElement(vt.Provider,{value:t.getDataSet().getPointData()},e.children)}))}function It(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=ce.default(e);if(t){var n=ce.default(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return de.default(this,r)}}St.defaultProps={size:[400,150],rescaleColorMap:!0},St.propTypes={id:fe.default.string,size:fe.default.arrayOf(fe.default.number),rescaleColorMap:fe.default.bool},xt.defaultProps={},xt.propTypes={children:fe.default.oneOfType([fe.default.arrayOf(fe.default.node),fe.default.node])};var Et=function(e){ue.default(r,e);var t=It(r);function r(e){var a;return se.default(this,r),(a=t.call(this,e)).polydata=Le.default.newInstance(),a}return le.default(r,[{key:"render",value:function(){var e=this;return pe.default.createElement(ft.Consumer,null,(function(t){return pe.default.createElement(yt.Consumer,null,(function(r){return e.representation=t,e.downstream||(e.downstream=r),pe.default.createElement(ht.Provider,{value:e},pe.default.createElement("div",{key:e.props.id,id:e.props.id},e.props.children))}))}))}},{key:"componentDidMount",value:function(){this.update(this.props)}},{key:"componentDidUpdate",value:function(e,t,r){this.update(this.props,e)}},{key:"componentWillUnmount",value:function(){this.polydata.delete(),this.polydata=null}},{key:"update",value:function(e,t){var r,a=e.connectivity,n=e.points,i=e.verts,o=e.lines,s=e.polys,l=e.strips,u=!1,d=Uint32Array;if(n&&(!t||!Pt(n,t.points))){var c=kt(n,Float64Array);this.polydata.getPoints().setData(c,3),u=!0,d=c.length>196608?Uint32Array:Uint16Array}if(!i||t&&Pt(i,t.verts)||(this.polydata.getVerts().setData(kt(i,d)),u=!0),!o||t&&Pt(o,t.lines)||(this.polydata.getLines().setData(kt(o,d)),u=!0),!s||t&&Pt(s,t.polys)||(this.polydata.getPolys().setData(kt(s,d)),u=!0),!l||t&&Pt(l,t.strips)||(this.polydata.getStrips().setData(kt(l,d)),u=!0),a&&(!t||(null==n?void 0:n.length)!==(null===(r=t.points)||void 0===r?void 0:r.length)||a!==t.connectivity)){var p=n.length/3;switch(a){case"points":var f=new Uint32Array(p+1);f[0]=p;for(var h=0;h<p;h++)f[h+1]=h;this.polydata.getVerts().setData(f),u=!0;break;case"triangles":for(var v=new Uint32Array(p+p/3),y=0,m=0;m<p;m+=3)v[y++]=3,v[y++]=m+0,v[y++]=m+1,v[y++]=m+2;this.polydata.getPolys().setData(v),u=!0;break;case"strips":var b=new Uint32Array(p+1);b[0]=p;for(var g=0;g<p;g++)b[g+1]=g;this.polydata.getStrips().setData(b),u=!0}}u&&this.modified()}},{key:"getDataSet",value:function(){return this.polydata}},{key:"modified",value:function(){this.polydata.modified(),this.downstream.setInputData(this.polydata,this.props.port),this.representation&&this.polydata.getPoints().getData().length&&(this.representation.dataAvailable(),this.representation.dataChanged())}}]),r}(o.Component);function Vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=ce.default(e);if(t){var n=ce.default(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return de.default(this,r)}}Et.defaultProps={port:0,points:[],connectivity:"manual"},Et.propTypes={id:fe.default.string,port:fe.default.number,points:fe.default.oneOfType([fe.default.arrayOf(fe.default.number),fe.default.object,fe.default.instanceOf(Float64Array),fe.default.instanceOf(Float32Array)]),verts:fe.default.oneOfType([fe.default.arrayOf(fe.default.number),fe.default.object,fe.default.instanceOf(Uint8Array),fe.default.instanceOf(Uint16Array),fe.default.instanceOf(Uint32Array)]),lines:fe.default.oneOfType([fe.default.arrayOf(fe.default.number),fe.default.object,fe.default.instanceOf(Uint8Array),fe.default.instanceOf(Uint16Array),fe.default.instanceOf(Uint32Array)]),polys:fe.default.oneOfType([fe.default.arrayOf(fe.default.number),fe.default.object,fe.default.instanceOf(Uint8Array),fe.default.instanceOf(Uint16Array),fe.default.instanceOf(Uint32Array)]),strips:fe.default.oneOfType([fe.default.arrayOf(fe.default.number),fe.default.object,fe.default.instanceOf(Uint8Array),fe.default.instanceOf(Uint16Array),fe.default.instanceOf(Uint32Array)]),connectivity:fe.default.string,children:fe.default.oneOfType([fe.default.arrayOf(fe.default.node),fe.default.node])};var Wt=function(e){ue.default(r,e);var t=Vt(r);function r(e){var a;return se.default(this,r),(a=t.call(this,e)).reader=null,a}return le.default(r,[{key:"render",value:function(){var e=this;return pe.default.createElement(pt.Consumer,null,(function(t){return pe.default.createElement(ft.Consumer,null,(function(r){return e.representation=r,pe.default.createElement(yt.Consumer,null,(function(r){return e.reader||(e.reader=e.createReader(e.props)),e.downstream||(r.setInputConnection(e.reader.getOutputPort(),e.props.port),e.downstream=r),e.view=t,pe.default.createElement(yt.Provider,{value:e.reader},pe.default.createElement("div",{key:e.props.id,id:e.props.id},e.props.children))}))}))}))}},{key:"componentDidMount",value:function(){this.update(this.props)}},{key:"componentDidUpdate",value:function(e,t,r){this.update(this.props,e)}},{key:"componentWillUnmount",value:function(){this.reader.delete(),this.reader=null}},{key:"createReader",value:function(e){var t=e.vtkClass,r=e.options;return Ne.default({vtkClass:t,progressCallback:r.progressCallback})}},{key:"update",value:function(e,t){var r=this,a=e.vtkClass,n=e.url,i=e.parseAsText,o=e.parseAsArrayBuffer,s=e.options;!a||t&&a===t.vtkClass||(this.reader=this.createReader(e),this.downstream.setInputConnection(this.reader.getOutputPort(),this.props.port)),!n||t&&n===t.url||this.reader.setUrl(n,s).then((function(){r.reader&&(r.representation&&r.representation.dataAvailable(),r.view&&(r.props.resetCameraOnUpdate&&r.view.resetCamera(),r.props.renderOnUpdate&&r.view.renderView()))})),!i||t&&i===t.parseAsText||(this.reader.parseAsText(i),this.representation&&this.representation.dataAvailable()),!o||t&&o===t.parseAsArrayBuffer||(this.reader.parseAsArrayBuffer(Ie.default.toArrayBuffer(o)),this.representation&&this.representation.dataAvailable()),this.view&&(this.props.resetCameraOnUpdate&&this.view.resetCamera(),this.props.renderOnUpdate&&this.view.renderView())}}]),r}(o.Component);function Bt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=ce.default(e);if(t){var n=ce.default(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return de.default(this,r)}}function Ut(e,t){t.classHierarchy.push("vtkTrivialProducer"),e.requestData=function(e,t){t.length=e.length;for(var r=0;r<e.length;r++)t[r]=e[r]}}Wt.defaultProps={port:0,vtkClass:"",renderOnUpdate:!0,resetCameraOnUpdate:!0,options:{binary:!0}},Wt.propTypes={id:fe.default.string,port:fe.default.number,vtkClass:fe.default.string,url:fe.default.string,parseAsText:fe.default.string,parseAsArrayBuffer:fe.default.string,renderOnUpdate:fe.default.bool,resetCameraOnUpdate:fe.default.bool,options:fe.default.object,children:fe.default.oneOfType([fe.default.arrayOf(fe.default.node),fe.default.node])};var qt=me.default.newInstance((function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.assign(t,r),me.default.obj(e,t),me.default.algo(e,t,1,1),me.default.event(e,t,"DataAvailable"),Ut(e,t)}),"vtkTrivialProducer"),Ft={},zt=function(e){ue.default(r,e);var t=Bt(r);function r(){return se.default(this,r),t.apply(this,arguments)}return le.default(r,[{key:"getTrivialProducer",value:function(){var e=Ft[this.props.name];return e||(e=qt(),Ft[this.props.name]=e),e}},{key:"componentDidMount",value:function(){var e=this.getTrivialProducer().getOutputData();e&&!e.isDeleted()&&this.dataAvailable()}},{key:"componentWillUnmount",value:function(){this.subscription&&(this.subscription.unsubscribe(),this.subscription=null)}},{key:"render",value:function(){var e=this;return this.update(),pe.default.createElement(ft.Consumer,null,(function(t){return pe.default.createElement(yt.Consumer,null,(function(r){return e.representation=t,e.downstream||(e.downstream=r),pe.default.createElement(ft.Provider,{value:e},pe.default.createElement(yt.Provider,{value:e.getTrivialProducer()},pe.default.createElement("div",{key:e.props.id,id:e.props.id},e.props.children)))}))}))}},{key:"update",value:function(){var e=this;this.subscription&&(this.subscription.unsubscribe(),this.subscription=null),this.subscription=this.getTrivialProducer().onDataAvailable((function(){e.dataAvailable()}))}},{key:"dataAvailable",value:function(){this.downstream&&this.downstream.setInputConnection(this.getTrivialProducer().getOutputPort(),this.props.port),this.validData||(this.validData=!0,this.getTrivialProducer().invokeDataAvailable()),this.representation&&this.representation.dataAvailable()}},{key:"dataChanged",value:function(){this.representation&&this.representation.dataChanged()}}]),r}(o.Component);function Lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=ce.default(e);if(t){var n=ce.default(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return de.default(this,r)}}function Nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Gt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(r),!0).forEach((function(t){ve.default(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}zt.defaultProps={port:0,name:"shared"},zt.propTypes={id:fe.default.string,port:fe.default.number,name:fe.default.string,children:fe.default.oneOfType([fe.default.arrayOf(fe.default.node),fe.default.node])};var _t=pe.default.createContext(null);var Ht={position:"absolute",top:0,left:0,right:0,bottom:0,pointerEvents:"none"},Jt=function(e){ue.default(r,e);var t=Lt(r);function r(e){var a;return se.default(this,r),(a=t.call(this,e)).containerRef=pe.default.createRef(),a.containerToRenderer=new Map,a.renderWindow=Xe.default.newInstance(),a.interactor=null,a.renderWindowView=Ke.default.newInstance(),a.renderWindow.addView(a.renderWindowView),a.resizeObserver=new ResizeObserver((function(e){a.onResize(e)})),a.interactor=Ye.default.newInstance(),a.interactor.setView(a.renderWindowView),a.onResize=a.onResize.bind(ye.default(a)),a.initialized=!1,a}return le.default(r,[{key:"componentDidMount",value:function(){if(!this.props.disabled){var e=this.containerRef.current;this.renderWindowView.setContainer(e),this.interactor.initialize(),this.resizeObserver.observe(e),this.resizeRootContainer(),this.initialized=!0,this.update(this.props)}}},{key:"componentDidUpdate",value:function(e){this.update(this.props,e)}},{key:"componentWillUnmount",value:function(){this.initialized&&(this.resizeObserver.disconnect(),this.interactor.getContainer()&&this.interactor.unbindEvents(),this.renderWindowView.setContainer(null)),this.renderWindow.removeView(this.renderWindowView),this.interactor.delete(),this.renderWindow.delete(),this.renderWindowView.delete(),this.interactor=null,this.renderWindow=null,this.renderWindowView=null}},{key:"render",value:function(){var e,t,r,a=this.props,n=a.id,i=a.children,o=a.style,s=a.disabled;return pe.default.createElement("div",Ge.default({key:n,id:n,style:Gt({position:"relative"},o)},(e=this.props,t=Object.keys(Zt),r=Gt({},e),t.forEach((function(e){delete r[e]})),r)),pe.default.createElement("div",{style:Ht,ref:this.containerRef}),pe.default.createElement(_t.Provider,{value:s?null:this},i))}},{key:"bindInteractorEvents",value:function(e){this.interactor&&(this.interactor.getContainer()&&this.interactor.unbindEvents(),e&&this.interactor.bindEvents(e))}},{key:"observeRendererResize",value:function(e,t){this.containerToRenderer.has(e)||(this.containerToRenderer.set(e,t),this.resizeObserver.observe(e))}},{key:"unobserveRendererResize",value:function(e){this.containerToRenderer.delete(e),this.resizeObserver.unobserve(e)}},{key:"resizeRootContainer",value:function(){var e=this.containerRef.current;if(e){var t=window.devicePixelRatio||1,r=e.getBoundingClientRect(),a=r.width,n=r.height,i=Math.floor(a*t),o=Math.floor(n*t);this.renderWindowView.setSize(Math.max(i,10),Math.max(o,10))}}},{key:"onResize",value:function(e){var t=this;e.forEach((function(e){var r=t.containerRef.current;if(e.target===r)t.resizeRootContainer();else if(t.containerToRenderer.has(e.target)){var a=t.containerToRenderer.get(e.target),n=e.target.getBoundingClientRect(),i=t.renderWindowView.getCanvas().getBoundingClientRect(),o=n.top-i.top,s=n.left-i.left,l=s/i.width,u=(s+n.width)/i.width,d=1-(o+n.height)/i.height,c=1-o/i.height;a.setViewport(l,d,u,c)}})),this.renderWindow.render()}},{key:"update",value:function(e,t){var r=e.triggerRender;t&&r!==t.triggerRender&&(this.renderViewTimeout=setTimeout(this.renderWindow.render,0))}}]),r}(o.Component);Jt.defaultProps={triggerRender:0,disabled:!1};var Zt={id:fe.default.string,triggerRender:fe.default.number,disabled:fe.default.bool,children:fe.default.oneOfType([fe.default.arrayOf(fe.default.node),fe.default.node])};function Xt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function Yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=ce.default(e);if(t){var n=ce.default(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return de.default(this,r)}}Jt.propTypes=Zt;var Kt=function(e){ue.default(r,e);var t=Yt(r);function r(e){var a;return se.default(this,r),(a=t.call(this,e)).renderer=Ze.default.newInstance(),a.view=null,a.resizeObserver=new ResizeObserver((function(){return a.onResize()})),e.root?(a.renderWindow=e.root.renderWindow,a.openglRenderWindow=e.root.renderWindowView,a.interactor=e.root.interactor):(a.renderWindow=He.default.newInstance(),a.openglRenderWindow=_e.default.newInstance(),a.interactor=Je.default.newInstance()),a.onEnter=a.onEnter.bind(ye.default(a)),a.onResize=a.onResize.bind(ye.default(a)),a.setViewRef=a.setViewRef.bind(ye.default(a)),a}return le.default(r,[{key:"componentDidMount",value:function(){var e;this.props.root||(this.renderWindow.addView(this.openglRenderWindow),this.props.interactive&&(this.interactor.setView(this.openglRenderWindow),this.interactor.initialize())),this.renderWindow.addRenderer(this.renderer);var t=null===(e=this.view)||void 0===e?void 0:e.containerRef.current;this.view&&t&&(t.addEventListener("pointerenter",this.onEnter),this.props.root?this.props.root.observeRendererResize(t,this.renderer):(this.resizeObserver.observe(t),this.openglRenderWindow.setContainer(t),this.props.interactive&&this.interactor.bindEvents(t),this.interactor.setInteractorStyle(this.view.style),this.onResize()))}},{key:"componentWillUnmount",value:function(){var e,t=null===(e=this.view)||void 0===e?void 0:e.containerRef.current;t.removeEventListener("pointerenter",this.onEnter),this.resizeObserver.disconnect(),this.props.root&&this.props.root.unobserveRendererResize(t),this.renderWindow.isDeleted()||this.renderWindow.removeRenderer(this.renderer),this.props.root?this.bindInteractorEvents(null):(this.interactor.getContainer()&&this.interactor.unbindEvents(),this.openglRenderWindow.setContainer(null),this.renderWindow.isDeleted()||(this.renderWindow.removeView(this.openglRenderWindow),this.renderWindow.delete()),this.interactor.delete(),this.openglRenderWindow.delete()),this.renderer.delete(),this.interactor=null,this.renderWindow=null,this.openglRenderWindow=null}},{key:"render",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(r),!0).forEach((function(t){ve.default(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.props);return delete e.root,pe.default.createElement(gt,Ge.default({renderWindow:this.renderWindow,renderWindowView:this.openglRenderWindow,renderer:this.renderer,interactor:this.interactor,ref:this.setViewRef},e))}},{key:"setViewRef",value:function(e){this.view=e,this.props.forwardedRef&&(this.props.forwardedRef.current=e)}},{key:"bindInteractorEvents",value:function(e){var t=this.interactor.getContainer();t!==e&&(t&&this.interactor.unbindEvents(),e&&this.interactor.bindEvents(e))}},{key:"onEnter",value:function(){var e,t=null===(e=this.view)||void 0===e?void 0:e.containerRef.current;this.props.root&&t&&(this.bindInteractorEvents(t),this.interactor.setCurrentRenderer(this.renderer),this.interactor.setInteractorStyle(this.view.style))}},{key:"onResize",value:function(){var e,t=null===(e=this.view)||void 0===e?void 0:e.containerRef.current;if(t&&!this.props.root){var r=window.devicePixelRatio||1,a=t.getBoundingClientRect(),n=a.width,i=a.height,o=Math.floor(n*r),s=Math.floor(i*r);this.openglRenderWindow.setSize(Math.max(o,10),Math.max(s,10)),this.renderWindow.render()}}}]),r}(o.Component);Kt.defaultProps=gt.defaultProps,Kt.propTypes=gt.propTypes;var Qt=pe.default.forwardRef((function(e,t){return pe.default.createElement(_t.Consumer,null,(function(r){return pe.default.createElement(Kt,Ge.default({forwardedRef:t},e,{root:r}))}))}));function $t(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=ce.default(e);if(t){var n=ce.default(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return de.default(this,r)}}var er=function(e){ue.default(r,e);var t=$t(r);function r(e){var a;return se.default(this,r),(a=t.call(this,e)).validData=!1,a.currentVisibility=!0,a.actor=Qe.default.newInstance({visibility:!1,representationId:e.id}),a.lookupTable=Be.default.newInstance(),a.mapper=$e.default.newInstance({lookupTable:a.lookupTable,useLookupTableScalarRange:!0}),a.actor.setMapper(a.mapper),a.scalarBar=et.default.newInstance(),a.scalarBar.setScalarsToColors(a.lookupTable),a.scalarBar.setVisibility(!1),a.subscriptions=[],e.showCubeAxes&&a.initCubeAxes(),a}return le.default(r,[{key:"initCubeAxes",value:function(){var e=this;this.cubeAxes=ge.default.newInstance({visibility:!1,dataBounds:[-1,1,-1,1,-1,1]}),this.cubeAxes.getActors().forEach((function(e){return(0,e.setVisibility)(!1)}));this.subscriptions.push(this.mapper.onModified((function t(){if(e.mapper.getInputData()){1===e.subscriptions.length&&e.subscriptions.push(e.mapper.getInputData().onModified(t));var r=e.mapper.getInputData().getBounds();r[0]<r[1]&&(e.cubeAxes&&e.cubeAxes.setDataBounds(r),e.view&&e.view.renderView())}})))}},{key:"render",value:function(){var e=this;return pe.default.createElement(pt.Consumer,null,(function(t){return e.view||(e.cubeAxes&&(e.cubeAxes.setCamera(t.renderer.getActiveCamera()),t.renderer.addActor(e.cubeAxes)),t.renderer.addActor(e.scalarBar),t.renderer.addActor(e.actor),e.view=t),pe.default.createElement(ft.Provider,{value:e},pe.default.createElement(yt.Provider,{value:e.mapper},pe.default.createElement("div",{key:e.props.id,id:e.props.id},e.props.children)))}))}},{key:"componentDidMount",value:function(){this.update(this.props)}},{key:"componentDidUpdate",value:function(e,t,r){this.update(this.props,e)}},{key:"componentWillUnmount",value:function(){for(;this.subscriptions.length;)this.subscriptions.pop().unsubscribe();this.view&&this.view.renderer&&(this.view.renderer.removeActor(this.scalarBar),this.view.renderer.removeActor(this.cubeAxes),this.view.renderer.removeActor(this.actor)),this.scalarBar.delete(),this.scalarBar=null,this.cubeAxes&&(this.cubeAxes.delete(),this.cubeAxes=null),this.actor.delete(),this.actor=null,this.mapper.delete(),this.mapper=null,this.lookupTable.delete(),this.lookupTable=null}},{key:"update",value:function(e,t){var r,a=this,n=e.cubeAxesStyle,i=e.showCubeAxes,o=e.actor,s=e.mapper,l=e.property,u=e.colorMapPreset,d=e.colorDataRange,c=!1;if(!o||t&&o===t.actor||(c=this.actor.set(o)||c),!s||t&&s===t.mapper||(c=this.mapper.set(s)||c),!l||t&&l===t.property||(c=this.actor.getProperty().set(l)||c),u&&(!t||u!==t.colorMapPreset)){var p;c=!0;var f=We.default.getPresetByName(u);this.lookupTable.applyColorMap(f),(p=this.lookupTable).setMappingRange.apply(p,oe.default(d)),this.lookupTable.updateRange()}!d||t&&Rt(d,t.colorDataRange)||(c=!0,(r=this.lookupTable).setMappingRange.apply(r,oe.default(d)),this.lookupTable.updateRange());i&&null==this.cubeAxes&&(c=!0,this.initCubeAxes(),!n||t&&n===t.cubeAxesStyle||this.cubeAxes.set(n)),null!=this.cubeAxes&&i!==this.cubeAxes.getVisibility()&&(c=!0,this.cubeAxes.setVisibility(i&&this.validData),this.cubeAxes.getActors().forEach((function(e){return(0,e.setVisibility)(i&&a.validData)}))),c=this.scalarBar.setVisibility(e.showScalarBar&&this.validData)||c,c=this.scalarBar.setAxisLabel(e.scalarBarTitle)||c,c=this.scalarBar.set(e.scalarBarStyle||{})||c,o&&void 0!==o.visibility&&(this.currentVisibility=o.visibility,c=this.actor.setVisibility(this.currentVisibility&&this.validData)||c),c&&this.dataChanged()}},{key:"dataAvailable",value:function(){var e=this;this.validData||(this.validData=!0,this.actor.setVisibility(this.currentVisibility),this.scalarBar.setVisibility(this.props.showScalarBar),this.cubeAxes&&(this.cubeAxes.setVisibility(this.props.showCubeAxes),this.cubeAxes.getActors().forEach((function(t){return(0,t.setVisibility)(e.props.showCubeAxes)}))),this.dataChanged())}},{key:"dataChanged",value:function(){this.view&&this.view.renderView()}}]),r}(o.Component);function tr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=ce.default(e);if(t){var n=ce.default(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return de.default(this,r)}}er.defaultProps={colorMapPreset:"erdc_rainbow_bright",colorDataRange:[0,1],showCubeAxes:!1,showScalarBar:!1,scalarBarTitle:""},er.propTypes={id:fe.default.string,actor:fe.default.object,mapper:fe.default.object,property:fe.default.object,colorMapPreset:fe.default.string,colorDataRange:fe.default.arrayOf(fe.default.number),showCubeAxes:fe.default.bool,cubeAxesStyle:fe.default.object,showScalarBar:fe.default.bool,scalarBarTitle:fe.default.string,scalarBarStyle:fe.default.object,children:fe.default.oneOfType([fe.default.arrayOf(fe.default.node),fe.default.node])};var rr=function(e){ue.default(r,e);var t=tr(r);function r(e){var a,n,i;return se.default(this,r),(i=t.call(this,e)).validData=!1,i.currentVisibility=!0,i.actor=tt.default.newInstance({visibility:!1,representationId:e.id}),i.lookupTable=Be.default.newInstance(),i.transformCoordinate=at.default.newInstance({coordinateSystem:null!==(a=null===(n=i.props.transformCoordinate)||void 0===n?void 0:n.coordinateSystem)&&void 0!==a?a:$.Coordinate.DISPLAY}),i.mapper=rt.default.newInstance({lookupTable:i.lookupTable,useLookupTableScalarRange:!1,scalarVisibility:!1,transformCoordinate:i.transformCoordinate}),i.actor.setMapper(i.mapper),i.subscriptions=[],i}return le.default(r,[{key:"render",value:function(){var e=this;return pe.default.createElement(pt.Consumer,null,(function(t){return e.view||(t.renderer.addActor2D(e.actor),e.view=t),pe.default.createElement(ft.Provider,{value:e},pe.default.createElement(yt.Provider,{value:e.mapper},pe.default.createElement("div",{key:e.props.id,id:e.props.id},e.props.children)))}))}},{key:"componentDidMount",value:function(){this.update(this.props)}},{key:"componentDidUpdate",value:function(e,t,r){this.update(this.props,e)}},{key:"componentWillUnmount",value:function(){for(;this.subscriptions.length;)this.subscriptions.pop().unsubscribe();this.view&&this.view.renderer&&this.view.renderer.removeActor(this.actor),this.actor.delete(),this.actor=null,this.mapper.delete(),this.mapper=null,this.lookupTable.delete(),this.lookupTable=null,this.transformCoordinate.delete(),this.transformCoordinate=null}},{key:"update",value:function(e,t){var r,a=e.actor,n=e.mapper,i=e.property,o=e.colorMapPreset,s=e.colorDataRange,l=e.transformCoordinate,u=!1;if(!a||t&&a===t.actor||(u=this.actor.set(a)||u),!n||t&&n===t.mapper||(u=this.mapper.set(n)||u),!i||t&&i===t.property||(u=this.actor.getProperty().set(i)||u),o&&this.lookupTable&&(!t||o!==t.colorMapPreset)){var d;u=!0;var c=We.default.getPresetByName(o);this.lookupTable.applyColorMap(c),(d=this.lookupTable).setMappingRange.apply(d,oe.default(s)),this.lookupTable.updateRange()}!s||!this.lookupTable||t&&Rt(s,t.colorDataRange)||(u=!0,(r=this.lookupTable).setMappingRange.apply(r,oe.default(s)),this.lookupTable.updateRange());!l||!this.transformCoordinate||t&&l===t.transformCoordinate||(u=!0,this.transformCoordinate.set(l)),a&&void 0!==a.visibility&&(this.currentVisibility=a.visibility,u=this.actor.setVisibility(this.currentVisibility&&this.validData)||u),u&&this.dataChanged()}},{key:"dataAvailable",value:function(){this.validData||(this.validData=!0,this.actor.setVisibility(this.currentVisibility),this.dataChanged())}},{key:"dataChanged",value:function(){this.view&&this.view.renderView()}}]),r}(o.Component);function ar(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=ce.default(e);if(t){var n=ce.default(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return de.default(this,r)}}rr.defaultProps={colorMapPreset:"erdc_rainbow_bright",colorDataRange:[0,1]},rr.propTypes={id:fe.default.string,actor:fe.default.object,mapper:fe.default.object,property:fe.default.object,colorMapPreset:fe.default.string,colorDataRange:fe.default.arrayOf(fe.default.number),transformCoordinate:fe.default.object,children:fe.default.oneOfType([fe.default.arrayOf(fe.default.node),fe.default.node])};var nr=function(e){ue.default(r,e);var t=ar(r);function r(e){var a;return se.default(this,r),(a=t.call(this,e)).validData=!1,a.currentVisibility=!0,a.actor=Qe.default.newInstance({visibility:!1}),a.lookupTable=Be.default.newInstance(),a.mapper=nt.default.newInstance({lookupTable:a.lookupTable,useLookupTableScalarRange:!0}),a.actor.setMapper(a.mapper),a}return le.default(r,[{key:"render",value:function(){var e=this;return pe.default.createElement(pt.Consumer,null,(function(t){return e.view||(t.renderer.addActor(e.actor),e.view=t),pe.default.createElement(ft.Provider,{value:e},pe.default.createElement(yt.Provider,{value:e.mapper},pe.default.createElement("div",{key:e.props.id,id:e.props.id},e.props.children)))}))}},{key:"componentDidMount",value:function(){this.update(this.props)}},{key:"componentDidUpdate",value:function(e,t,r){this.update(this.props,e)}},{key:"componentWillUnmount",value:function(){this.view&&this.view.renderer&&this.view.renderer.removeActor(this.actor),this.actor.delete(),this.actor=null,this.mapper.delete(),this.mapper=null,this.lookupTable.delete(),this.lookupTable=null}},{key:"update",value:function(e,t){var r,a=e.actor,n=e.mapper,i=e.property,o=e.colorMapPreset,s=e.colorDataRange,l=!1;if(!a||t&&a===t.actor||(l=this.actor.set(a)||l),!n||t&&n===t.mapper||(l=this.mapper.set(n)||l),!i||t&&i===t.property||(l=this.actor.getProperty().set(i)||l),o&&(!t||o!==t.colorMapPreset)){var u;l=!0;var d=We.default.getPresetByName(o);this.lookupTable.applyColorMap(d),(u=this.lookupTable).setMappingRange.apply(u,oe.default(s)),this.lookupTable.updateRange()}!s||t&&Pt(s,t.colorDataRange)||(l=!0,(r=this.lookupTable).setMappingRange.apply(r,oe.default(s)),this.lookupTable.updateRange());a&&void 0!==a.visibility&&(this.currentVisibility=a.visibility,l=this.actor.setVisibility(this.currentVisibility&&this.validData)||l),l&&this.dataChanged()}},{key:"dataAvailable",value:function(){this.validData||(this.validData=!0,this.actor.setVisibility(this.currentVisibility),this.dataChanged())}},{key:"dataChanged",value:function(){this.view&&this.view.renderView()}}]),r}(o.Component);function ir(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=ce.default(e);if(t){var n=ce.default(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return de.default(this,r)}}nr.defaultProps={colorMapPreset:"erdc_rainbow_bright",colorDataRange:[0,1]},nr.propTypes={id:fe.default.string,actor:fe.default.object,mapper:fe.default.object,property:fe.default.object,colorMapPreset:fe.default.string,colorDataRange:fe.default.arrayOf(fe.default.number),children:fe.default.oneOfType([fe.default.arrayOf(fe.default.node),fe.default.node])};var or=function(e){ue.default(r,e);var t=ir(r);function r(e){var a;return se.default(this,r),(a=t.call(this,e)).imageData=it.default.newInstance(),a}return le.default(r,[{key:"render",value:function(){var e=this;return pe.default.createElement(ft.Consumer,null,(function(t){return pe.default.createElement(yt.Consumer,null,(function(r){return e.representation=t,e.downstream||(e.downstream=r),pe.default.createElement(ht.Provider,{value:e},pe.default.createElement("div",{key:e.props.id,id:e.props.id},e.props.children))}))}))}},{key:"componentDidMount",value:function(){this.update(this.props)}},{key:"componentDidUpdate",value:function(e,t,r){this.update(this.props,e)}},{key:"componentWillUnmount",value:function(){this.imageData.delete(),this.imageData=null}},{key:"update",value:function(e,t){var r=e.dimensions,a=e.spacing,n=e.origin,i=e.direction;this.imageData.set({dimensions:r,spacing:a,origin:n,direction:i})}},{key:"getDataSet",value:function(){return this.imageData}},{key:"modified",value:function(){this.imageData.modified(),this.representation&&this.imageData.getPointData().getScalars()&&(this.downstream.setInputData(this.imageData,this.props.port),this.representation.dataAvailable(),this.representation.dataChanged())}}]),r}(o.Component);function sr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=ce.default(e);if(t){var n=ce.default(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return de.default(this,r)}}or.defaultProps={port:0,dimensions:[1,1,1],spacing:[1,1,1],origin:[0,0,0],direction:[1,0,0,0,1,0,0,0,1]},or.propTypes={id:fe.default.string,port:fe.default.number,dimensions:fe.default.arrayOf(fe.default.number),spacing:fe.default.arrayOf(fe.default.number),origin:fe.default.arrayOf(fe.default.number),direction:fe.default.arrayOf(fe.default.number),children:fe.default.oneOfType([fe.default.arrayOf(fe.default.node),fe.default.node])};var lr=function(e){ue.default(r,e);var t=sr(r);function r(e){var a;return se.default(this,r),(a=t.call(this,e)).array=ot.default.newInstance({name:"scalars",empty:!0}),a.arrayAttached=!1,a}return le.default(r,[{key:"render",value:function(){var e=this;return pe.default.createElement(ht.Consumer,null,(function(t){return e.dataset=t,pe.default.createElement(vt.Consumer,null,(function(t){return e.fields||(e.fields=t),pe.default.createElement("div",{key:e.props.id,name:e.props.name})}))}))}},{key:"componentDidMount",value:function(){this.update(this.props)}},{key:"componentDidUpdate",value:function(e,t,r){this.update(this.props,e)}},{key:"componentWillUnmount",value:function(){this.fields.removeArray(this.array.getName()),this.array.delete(),this.array=null}},{key:"update",value:function(e,t){var r=e.name,a=e.type,n=e.values,i=e.numberOfComponents,o=e.range,s=c.TYPED_ARRAYS[a],l=!1;this.array.setName(r),!a||t&&a===t.type||(l=!0),!i||t&&i===t.numberOfComponents||(l=!0),!n||!l&&t&&n===t.values||(this.array.setData(kt(n,s),i),o&&this.array.setRange(o,i),l=!0),this.arrayAttached||(this.fields[this.props.registration](this.array),this.arrayAttached=!0,l=!0),l&&this.dataset&&this.dataset.modified()}}]),r}(o.Component);function ur(e){return pe.default.createElement(ht.Consumer,null,(function(t){return pe.default.createElement(vt.Provider,{value:t.getDataSet().getFieldData()},e.children)}))}function dr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function cr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dr(Object(r),!0).forEach((function(t){ve.default(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=ce.default(e);if(t){var n=ce.default(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return de.default(this,r)}}lr.defaultProps={name:"scalars",type:"Float32Array",values:[],numberOfComponents:1,registration:"addArray"},lr.propTypes={id:fe.default.string,type:fe.default.string,name:fe.default.string,values:fe.default.oneOfType([fe.default.arrayOf(fe.default.number),fe.default.object,fe.default.instanceOf(Float64Array),fe.default.instanceOf(Float32Array),fe.default.instanceOf(Int32Array),fe.default.instanceOf(Int16Array),fe.default.instanceOf(Int8Array),fe.default.instanceOf(Uint32Array),fe.default.instanceOf(Uint16Array),fe.default.instanceOf(Uint8Array)]),numberOfComponents:fe.default.number,registration:fe.default.string},ur.defaultProps={},ur.propTypes={children:fe.default.oneOfType([fe.default.arrayOf(fe.default.node),fe.default.node])};var fr=function(e){ue.default(r,e);var t=pr(r);function r(e){var a;return se.default(this,r),(a=t.call(this,e)).algo=null,a}return le.default(r,[{key:"render",value:function(){var e=this;return pe.default.createElement(ft.Consumer,null,(function(t){return pe.default.createElement(yt.Consumer,null,(function(r){if(e.representation=t,!e.algo){var a=e.props,n=a.vtkClass,i=a.state;e.algo=Ne.default(cr({vtkClass:n},i))}return e.downstream||(r.setInputConnection(e.algo.getOutputPort(),e.props.port),e.downstream=r),pe.default.createElement(yt.Provider,{value:e.algo},pe.default.createElement("div",{key:e.props.id,id:e.props.id},e.props.children))}))}))}},{key:"componentDidMount",value:function(){this.update(this.props)}},{key:"componentDidUpdate",value:function(e,t,r){this.update(this.props,e)}},{key:"componentWillUnmount",value:function(){this.algo.delete(),this.algo=null}},{key:"update",value:function(e,t){var r=e.vtkClass,a=e.state;if(r&&(!t||r!==t.vtkClass)){if(this.algo){if(this.algo.getClassName()!==r){var n=this.algo;this.algo=Ne.default(cr({vtkClass:r},a));for(var i=n.getNumberOfInputPorts(),o=0;o<i;o++){var s=n.getInputConnection(o);s?this.algo.setInputConnection(s,o):this.algo.setInputData(n.getInputData(o),o)}}}else this.algo=Ne.default(cr({vtkClass:r},a));this.downstream.setInputConnection(this.algo.getOutputPort(),this.props.port)}!a||t&&Pt(a,t.state)||(this.algo.set(a),this.representation&&this.representation.dataChanged()),0===this.algo.getNumberOfInputPorts()&&this.representation&&this.representation.dataAvailable()}}]),r}(o.Component);function hr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=ce.default(e);if(t){var n=ce.default(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return de.default(this,r)}}fr.defaultProps={port:0,vtkClass:"vtkConeSource",state:{}},fr.propTypes={id:fe.default.string,port:fe.default.number,vtkClass:fe.default.string,state:fe.default.object,children:fe.default.oneOfType([fe.default.arrayOf(fe.default.node),fe.default.node])};var vr=lt.default.FieldDataTypes,yr=function(e){ue.default(r,e);var t=hr(r);function r(e){var a;return se.default(this,r),(a=t.call(this,e)).calculator=st.default.newInstance(),a}return le.default(r,[{key:"render",value:function(){var e=this,t=this.props,r=t.name,a=t.arrays,n=t.location,i=t.formula;return this.calculator.setFormulaSimple(vr[n],a,r,i),pe.default.createElement(yt.Consumer,null,(function(t){return e.downstream||(t.setInputConnection(e.calculator.getOutputPort(),e.props.port),e.downstream=t),pe.default.createElement(yt.Provider,{value:e.calculator},pe.default.createElement("div",{key:e.props.id,id:e.props.id},e.props.children))}))}},{key:"componentWillUnmount",value:function(){this.calculator.delete(),this.calculator=null}}]),r}(o.Component);function mr(e){return pe.default.createElement(ht.Consumer,null,(function(t){return pe.default.createElement(vt.Provider,{value:t.getDataSet().getCellData()},e.children)}))}yr.defaultProps={port:0,name:"scalars",location:"POINT",arrays:[],formula:function(e){return e[0]}},yr.propTypes={id:fe.default.string,port:fe.default.number,name:fe.default.string,location:fe.default.string,arrays:fe.default.arrayOf(fe.default.string),formula:fe.default.func,children:fe.default.oneOfType([fe.default.arrayOf(fe.default.node),fe.default.node])},mr.defaultProps={},mr.propTypes={children:fe.default.oneOfType([fe.default.arrayOf(fe.default.node),fe.default.node])};var br={VolumeRepresentation:Dt,SliceRepresentation:Mt,VolumeController:St,PointData:xt,PolyData:Et,Reader:Wt,ShareDataSet:zt,View:Qt,GeometryRepresentation:er,Geometry2DRepresentation:rr,GlyphRepresentation:nr,ImageData:or,DataArray:lr,FieldData:ur,Algorithm:fr,Calculator:yr,CellData:mr,MultiViewRoot:Jt};function gr(e){var t=0,r=null,a=null;return e.rgb&&(r=e.rgb,t=3,a="Uint8Array"),e.rgba&&(r=e.rgb,t=4,a="Uint8Array"),e.scalars&&(r=e.scalars,t=1,a="Float32Array"),console.log("nbComponents",t),pe.default.createElement(er,{id:e.id,colorMapPreset:e.colorMapPreset,colorDataRange:e.colorDataRange,property:e.property,showCubeAxes:e.showCubeAxes,cubeAxesStyle:e.cubeAxesStyle,showScalarBar:e.showScalarBar,scalarBarTitle:e.scalarBarTitle,scalarBarStyle:e.scalarBarStyle},pe.default.createElement(Et,{points:e.xyz,connectivity:"points"},t&&pe.default.createElement(xt,null,pe.default.createElement(lr,{registration:"setScalars",numberOfComponents:t,values:r,type:a}))))}function wr(e){var t=0,r=null,a=null;return e.rgb&&(r=e.rgb,t=3,a="Uint8Array"),e.rgba&&(r=e.rgb,t=4,a="Uint8Array"),e.scalars&&(r=e.scalars,t=1,a=e.scalarsType),pe.default.createElement(Dt,{id:e.id,colorMapPreset:e.colorMapPreset,colorDataRange:e.colorDataRange,property:e.property,mapper:e.mapper,volume:e.volume},e.volumeController&&pe.default.createElement(St,{rescaleColorMap:e.rescaleColorMap,size:e.controllerSize}),pe.default.createElement(or,{dimensions:e.dimensions,origin:e.origin,spacing:e.spacing},pe.default.createElement(xt,null,pe.default.createElement(lr,{registration:"setScalars",numberOfComponents:t,values:r,type:a}))))}gr.defaultProps={xyz:[0,0,0],colorMapPreset:"erdc_rainbow_bright",colorDataRange:[0,1],showCubeAxes:!1,showScalarBar:!1,scalarBarTitle:""},gr.propTypes={id:fe.default.string,xyz:fe.default.arrayOf(fe.default.number),rgb:fe.default.arrayOf(fe.default.number),rgba:fe.default.arrayOf(fe.default.number),scalars:fe.default.arrayOf(fe.default.number),colorMapPreset:fe.default.string,colorDataRange:fe.default.arrayOf(fe.default.number),property:fe.default.object,showCubeAxes:fe.default.bool,cubeAxesStyle:fe.default.object,showScalarBar:fe.default.bool,scalarBarTitle:fe.default.string,scalarBarStyle:fe.default.object},wr.defaultProps={scalarsType:"Float32Array",colorMapPreset:"erdc_rainbow_bright",colorDataRange:"auto",volumeController:!0,rescaleColorMap:!0,controllerSize:[400,150]},wr.propTypes={id:fe.default.string,dimensions:fe.default.arrayOf(fe.default.number),spacing:fe.default.arrayOf(fe.default.number),origin:fe.default.arrayOf(fe.default.number),rgb:fe.default.arrayOf(fe.default.number),rgba:fe.default.arrayOf(fe.default.number),scalars:fe.default.arrayOf(fe.default.number),scalarsType:fe.default.string,mapper:fe.default.object,volume:fe.default.object,property:fe.default.object,colorMapPreset:fe.default.string,volumeController:fe.default.bool,controllerSize:fe.default.arrayOf(fe.default.number),rescaleColorMap:fe.default.bool,colorDataRange:fe.default.oneOfType([fe.default.arrayOf(fe.default.number),fe.default.string])};var kr={PointCloudRepresentation:gr,VolumeDataRepresentation:wr},Rr=br.VolumeRepresentation,Cr=br.SliceRepresentation,Or=br.VolumeController,Pr=br.PointData,Ar=br.PolyData,Dr=br.Reader,jr=br.ShareDataSet,Mr=br.View,Tr=br.GeometryRepresentation,Sr=br.Geometry2DRepresentation,xr=br.GlyphRepresentation,Ir=br.ImageData,Er=br.DataArray,Vr=br.FieldData,Wr=br.Algorithm,Br=br.Calculator,Ur=br.CellData,qr=br.MultiViewRoot,Fr=kr.PointCloudRepresentation,zr=kr.VolumeDataRepresentation,Lr={ViewContext:pt,RepresentationContext:ft,DataSetContext:ht,FieldsContext:vt,DownstreamContext:yt},Nr={Core:br,Representations:kr,Contexts:Lr};exports.Algorithm=Wr,exports.Calculator=Br,exports.CellData=Ur,exports.Contexts=Lr,exports.DataArray=Er,exports.FieldData=Vr,exports.Geometry2DRepresentation=Sr,exports.GeometryRepresentation=Tr,exports.GlyphRepresentation=xr,exports.ImageData=Ir,exports.MultiViewRoot=qr,exports.PointCloudRepresentation=Fr,exports.PointData=Pr,exports.PolyData=Ar,exports.Reader=Dr,exports.ShareDataSet=jr,exports.SliceRepresentation=Cr,exports.View=Mr,exports.VolumeController=Or,exports.VolumeDataRepresentation=zr,exports.VolumeRepresentation=Rr,exports.default=Nr;
